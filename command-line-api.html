<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.4 at 2019-06-14 
 | Rendered using Apache Maven Fluido Skin 1.6
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20190614" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Obevo &#x2013; Command-line API</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.6.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
      <script type="text/javascript" src="./js/apache-maven-fluido-1.6.min.js"></script>
      </head>
    <body class="topBarEnabled">
                      <a href="https://github.com/goldmansachs/obevo">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"
        alt="Fork me on GitHub">
    </a>
      <div id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
        <div class="container-fluid">
        <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
            <ul class="nav">
        <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Getting Started <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="index.html" title="Intro">Intro</a></li>
            <li><a href="overview.html" title="Overview">Overview</a></li>
            <li><a href="setup.html" title="Setup">Setup</a></li>
            <li><a href="support.html" title="Help and Support">Help and Support</a></li>
        </ul>
      </li>
        <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Technical Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="db-project-structure.html" title="DB Project Structure">DB Project Structure</a></li>
            <li><a href="environment-management.html" title="Environment Management">Environment Management</a></li>
            <li><a href="permission-management.html" title="Permission Management">Permission Management</a></li>
            <li><a href="error-handling.html" title="Error-Handling">Error-Handling</a></li>
        </ul>
      </li>
        <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">API Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="command-line-api.html" title="Command-line API">Command-line API</a></li>
            <li><a href="java-api.html" title="Java API">Java API</a></li>
            <li><a href="maven-api.html" title="Maven plugin API">Maven plugin API</a></li>
            <li><a href="gradle-api.html" title="Gradle API">Gradle API</a></li>
        </ul>
      </li>
        <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Advanced Topics <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="db-project-best-practices.html" title="DB Project Best Practices">DB Project Best Practices</a></li>
            <li><a href="rollback.html" title="Rollback">Rollback</a></li>
            <li><a href="multiple-schema-management.html" title="Multiple Schema Management">Multiple Schema Management</a></li>
            <li><a href="schema-and-config-packaging.html" title="Separate Schema and Config Packaging">Separate Schema and Config Packaging</a></li>
            <li><a href="in-memory-db-testing.html" title="In-memory DB Testing">In-memory DB Testing</a></li>
            <li><a href="parallel-deploy-execution.html" title="Parallel Deploy Execution">Parallel Deploy Execution</a></li>
            <li><a href="orm-integration.html" title="ORM Integration">ORM Integration</a></li>
            <li><a href="baseline-validation.html" title="Baseline DDL Validation">Baseline DDL Validation</a></li>
            <li><a href="phased-deployments.html" title="Phased Deployments">Phased Deployments</a></li>
            <li><a href="incremental-change-code-cleanup.html" title="Incremental Change Code Cleanup">Incremental Change Code Cleanup</a></li>
        </ul>
      </li>
        <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Platform-Specific Details <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="platform-listing.html" title="Platform Listing">Platform Listing</a></li>
            <li><a href="db2-notes.html" title="DB2">DB2</a></li>
            <li><a href="general-db-notes.html" title="HSQLDB">HSQLDB</a></li>
            <li><a href="general-db-notes.html" title="H2">H2</a></li>
            <li><a href="mongodb-notes.html" title="MongoDB">MongoDB</a></li>
            <li><a href="oracle-notes.html" title="Oracle">Oracle</a></li>
            <li><a href="postgresql-notes.html" title="PostgreSQL">PostgreSQL</a></li>
            <li><a href="redshift-notes.html" title="Redshift">Redshift</a></li>
            <li><a href="sybase-ase-notes.html" title="SQL Server">SQL Server</a></li>
            <li><a href="sybase-ase-notes.html" title="Sybase ASE">Sybase ASE</a></li>
            <li><a href="general-db-notes.html" title="Sybase IQ">Sybase IQ</a></li>
        </ul>
      </li>
        <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Onboarding Guide <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="onboarding-guide.html" title="Which onboarding to choose?">Which onboarding to choose?</a></li>
            <li><a href="new-onboarding-guide.html" title="New Systems">New Systems</a></li>
            <li><a href="existing-onboarding-guide.html" title="Existing Systems">Existing Systems</a></li>
            <li><a href="existing-diverging-onboarding-guide.html" title="Existing Systems with Diverging Shards">Existing Systems with Diverging Shards</a></li>
            <li><a href="legacy-onboarding-guide.html" title="Legacy Onboarding - Legacy Systems">Legacy Onboarding - Legacy Systems</a></li>
            <li><a href="db-merge-tool.html" title="DB Merge Tool">DB Merge Tool</a></li>
        </ul>
      </li>
        <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Developer Information <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li class="dropdown-submenu">
<a href="developer-guide.html" title="Developer Guide">Developer Guide</a>
              <ul class="dropdown-menu">
                  <li><a href="dev-setup-docker.html" title="Docker-based Test DB Setup">Docker-based Test DB Setup</a></li>
                  <li><a href="dev-setup-amazon.html" title="Amazon RDS DB Setup">Amazon RDS DB Setup</a></li>
                  <li><a href="dev-setup-sybase-ase.html" title="Sybase ASE Test DB Setup">Sybase ASE Test DB Setup</a></li>
              </ul>
            </li>
            <li><a href="design-walkthrough.html" title="Design Walkthrough">Design Walkthrough</a></li>
        </ul>
      </li>
              </ul>
            </div>
        </div>
      </div>
    </div>
    <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><a href="./" id="bannerLeft"><h2>Obevo</h2>
</a></div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li class=""><a href="./" title="Obevo">Obevo</a><span class="divider">/</span></li>
    <li class="active ">Command-line API</li>
        <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2019-06-14</li>
          <li id="projectVersion" class="pull-right">Version: master-SNAPSHOT</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
<ul class="nav nav-list">
          <li class="nav-header">Getting Started</li>
    <li><a href="index.html" title="Intro"><span class="none"></span>Intro</a>  </li>
    <li><a href="overview.html" title="Overview"><span class="none"></span>Overview</a>  </li>
    <li><a href="setup.html" title="Setup"><span class="none"></span>Setup</a>  </li>
    <li><a href="support.html" title="Help and Support"><span class="none"></span>Help and Support</a>  </li>
          <li class="nav-header">Technical Documentation</li>
    <li><a href="db-project-structure.html" title="DB Project Structure"><span class="none"></span>DB Project Structure</a>  </li>
    <li><a href="environment-management.html" title="Environment Management"><span class="none"></span>Environment Management</a>  </li>
    <li><a href="permission-management.html" title="Permission Management"><span class="none"></span>Permission Management</a>  </li>
    <li><a href="error-handling.html" title="Error-Handling"><span class="none"></span>Error-Handling</a>  </li>
          <li class="nav-header">API Documentation</li>
    <li class="active"><a href="#"><span class="none"></span>Command-line API</a>
  </li>
    <li><a href="java-api.html" title="Java API"><span class="none"></span>Java API</a>  </li>
    <li><a href="maven-api.html" title="Maven plugin API"><span class="none"></span>Maven plugin API</a>  </li>
    <li><a href="gradle-api.html" title="Gradle API"><span class="none"></span>Gradle API</a>  </li>
          <li class="nav-header">Advanced Topics</li>
    <li><a href="db-project-best-practices.html" title="DB Project Best Practices"><span class="none"></span>DB Project Best Practices</a>  </li>
    <li><a href="rollback.html" title="Rollback"><span class="none"></span>Rollback</a>  </li>
    <li><a href="multiple-schema-management.html" title="Multiple Schema Management"><span class="none"></span>Multiple Schema Management</a>  </li>
    <li><a href="schema-and-config-packaging.html" title="Separate Schema and Config Packaging"><span class="none"></span>Separate Schema and Config Packaging</a>  </li>
    <li><a href="in-memory-db-testing.html" title="In-memory DB Testing"><span class="none"></span>In-memory DB Testing</a>  </li>
    <li><a href="parallel-deploy-execution.html" title="Parallel Deploy Execution"><span class="none"></span>Parallel Deploy Execution</a>  </li>
    <li><a href="orm-integration.html" title="ORM Integration"><span class="none"></span>ORM Integration</a>  </li>
    <li><a href="baseline-validation.html" title="Baseline DDL Validation"><span class="none"></span>Baseline DDL Validation</a>  </li>
    <li><a href="phased-deployments.html" title="Phased Deployments"><span class="none"></span>Phased Deployments</a>  </li>
    <li><a href="incremental-change-code-cleanup.html" title="Incremental Change Code Cleanup"><span class="none"></span>Incremental Change Code Cleanup</a>  </li>
          <li class="nav-header">Platform-Specific Details</li>
    <li><a href="platform-listing.html" title="Platform Listing"><span class="none"></span>Platform Listing</a>  </li>
    <li><a href="db2-notes.html" title="DB2"><span class="none"></span>DB2</a>  </li>
    <li><a href="general-db-notes.html" title="HSQLDB"><span class="none"></span>HSQLDB</a>  </li>
    <li><a href="general-db-notes.html" title="H2"><span class="none"></span>H2</a>  </li>
    <li><a href="mongodb-notes.html" title="MongoDB"><span class="none"></span>MongoDB</a>  </li>
    <li><a href="oracle-notes.html" title="Oracle"><span class="none"></span>Oracle</a>  </li>
    <li><a href="postgresql-notes.html" title="PostgreSQL"><span class="none"></span>PostgreSQL</a>  </li>
    <li><a href="redshift-notes.html" title="Redshift"><span class="none"></span>Redshift</a>  </li>
    <li><a href="sybase-ase-notes.html" title="SQL Server"><span class="none"></span>SQL Server</a>  </li>
    <li><a href="sybase-ase-notes.html" title="Sybase ASE"><span class="none"></span>Sybase ASE</a>  </li>
    <li><a href="general-db-notes.html" title="Sybase IQ"><span class="none"></span>Sybase IQ</a>  </li>
          <li class="nav-header">Onboarding Guide</li>
    <li><a href="onboarding-guide.html" title="Which onboarding to choose?"><span class="none"></span>Which onboarding to choose?</a>  </li>
    <li><a href="new-onboarding-guide.html" title="New Systems"><span class="none"></span>New Systems</a>  </li>
    <li><a href="existing-onboarding-guide.html" title="Existing Systems"><span class="none"></span>Existing Systems</a>  </li>
    <li><a href="existing-diverging-onboarding-guide.html" title="Existing Systems with Diverging Shards"><span class="none"></span>Existing Systems with Diverging Shards</a>  </li>
    <li><a href="legacy-onboarding-guide.html" title="Legacy Onboarding - Legacy Systems"><span class="none"></span>Legacy Onboarding - Legacy Systems</a>  </li>
    <li><a href="db-merge-tool.html" title="DB Merge Tool"><span class="none"></span>DB Merge Tool</a>  </li>
          <li class="nav-header">Developer Information</li>
    <li><a href="developer-guide.html" title="Developer Guide"><span class="icon-chevron-down"></span>Developer Guide</a>
      <ul class="nav nav-list">
    <li><a href="dev-setup-docker.html" title="Docker-based Test DB Setup"><span class="none"></span>Docker-based Test DB Setup</a>  </li>
    <li><a href="dev-setup-amazon.html" title="Amazon RDS DB Setup"><span class="none"></span>Amazon RDS DB Setup</a>  </li>
    <li><a href="dev-setup-sybase-ase.html" title="Sybase ASE Test DB Setup"><span class="none"></span>Sybase ASE Test DB Setup</a>  </li>
      </ul>
  </li>
    <li><a href="design-walkthrough.html" title="Design Walkthrough"><span class="none"></span>Design Walkthrough</a>  </li>
  </ul>
          <hr />
          <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
  <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
              </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<!--

    Copyright 2017 Goldman Sachs.
    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.

--><h1>Command-line API</h1>
<p>The command line format is generally as follows:</p>

<div class="source">
<div class="source"><pre class="prettyprint">$OBEVO_PATH/bin/deploy.sh &lt;COMMAND&gt; -arg1 arg -arg2 arg etc
</pre></div></div>
<p>or if run via Docker:</p>

<div class="source">
<div class="source"><pre class="prettyprint">docker run shantstepanian/obevo &lt;COMMAND&gt; -arg1 arg -arg2 arg etc
</pre></div></div>
<p>where &lt;COMMAND&gt; is one of the following:</p>

<ul>
<li><a href="#DEPLOY">DEPLOY</a></li>
<li><a href="#PREVIEW">PREVIEW</a></li>
<li><a href="#INIT">INIT</a></li>
<li><a href="#Reverse_Engineering_Commands">Reverse Engineering Commands</a></li></ul>
<div class="section">
<div class="section">
<h3><a name="DEPLOY"></a>DEPLOY</h3>
<p>This is the main command for Obevo that will deploy your source changes to your target environment. It will</p>

<ol style="list-style-type: decimal">
  
<li>read your source changes</li>
  
<li>read the changes already deployed in the audit table</li>
  
<li>calculate the difference</li>
  
<li>deploy the changes.</li>
</ol>
<p>Listing of the commonly-used arguments (for full descriptions, run DEPLOY without any args):</p>
<p>-sourcePath &lt;arg&gt;</p>

<ul>
  
<li>The path to your DB source path (i.e. the directory where your system config file resides, or the direct path to the system config file itself</li>
  
<li>Required</li>
</ul>
<p>-action &lt;arg&gt;</p>

<ul>
  
<li>2 possible arguments:</li>
  
<li>clean - wipes away all objects from the schemas defined in your config. Useful for dev and test environments</li>
  
<li>deploy - does a standard deploy</li>
  
<li>You can specify as a comma-separated list if you want to do multiple commands</li>
  
<li>Optional - defaults to deploy</li>
</ul>
<p>-env &lt;arg&gt;</p>

<ul>
  
<li>The environment name/s defined in your config that you want to deploy. You can specify a comma-separated list or a wildcard via * or % (i.e. dev0*, %prod)</li>
  
<li>Optional if the config at your source path only defines 1 environment, then that is chosen. Otherwise, this is required.</li>
</ul>
<p>Credentials: -deployUserId &lt;arg&gt;, -password &lt;arg&gt;, -useKerberosAuth</p>

<ul>
  
<li>Either provide deployUserId + password, or deployUserId + useKerberos if you kinit beforehand and the platform supports it</li>
  
<li>Optional: if not provided at command line or from config, you will be prompted</li>
</ul>
<p>-noPrompt</p>

<ul>
  
<li>Defines if the deployment will proceed without any user interaction or prompting</li>
  
<li>Optional - defaults to false (i.e. users are prompted by default)</li>
</ul>
<p>-forceEnvSetup</p>

<ul>
  
<li>Defines whether to create infrastructure objects (e.g. schemas, users) prior to object deployment</li>
  
<li>Optional - the default is based on the platform-chosen. (in-memory testing environments will create the infrastructure by default; others will not)</li>
</ul></div>
<div class="section">
<h3><a name="PREVIEW"></a>PREVIEW</h3>
<p>PREVIEW is a read-only mode command that will show the user the changes that expect to be deployed (i.e. the first 3 steps mentioned in the DEPLOY command), but it will not actually deploy the changes.</p>
<p>This is a convenience for teams that just want to see the changes that will get deployed using a read-only db id</p>
<p>Same args as DEPLOY are used, except for -action</p></div>
<div class="section">
<h3><a name="INIT"></a>INIT</h3>
<p>The INIT command is used when onboarding an existing system to Obevo to mark your initial schema as &#x201c;already deployed&#x201d; in the system.</p>
<p>See the <a href="onboarding-guide.html">Onboarding Guide</a> for details.</p>
<p>Essentially, this will execute a DEPLOY command, just without executing your source code to the DB - it will just update the deploy audit table.</p></div>
<div class="section">
<h3><a name="Reverse_Engineering_Commands"></a>Reverse Engineering Commands</h3>
<p>These commands are used when you need to onboard an existing system to Obevo.</p>
<p>They would extract the DB schema from your existing data and put it into the Obevo file format.</p>
<p>See the <a href="onboarding-guide.html">Onboarding Guide</a> for details.</p>
<h1>Configuring Custom Java Arguments for the Obevo JVM</h1>
<p>Using environment variables, you can configure the JVM arguments that are used for the Obevo process:</p>

<ul>
  
<li>OBEVO_CLASSPATH: any jars that you want to prepend to the regular Obevo classpath</li>
  
<li>OBEVO_JAVA_OPTS: any system arguments or JVM args that you want to set for the process.</li>
</ul>
<p>Windows Example:</p>

<div class="source">
<div class="source"><pre class="prettyprint">SET OBEVO_CLASSPATH=C:\drivers\my-additional-driver.jar
C:\Obevo\bin\deploy DEPLOY -sourcePath ...
</pre></div></div>
<p>Linux Example:</p>

<div class="source">
<div class="source"><pre class="prettyprint">export OBEVO_JAVA_OPTS=&quot;-Xmx512M -Dmysysprop=myvalue&quot;
/opt/obevo/bin/deploy DEPLOY -sourcePath ...
</pre></div></div>
<h1>Configuring Custom Logging for the Obevo process</h1>
<p>Command-line logging is configured for two log types:</p>

<ul>
  
<li>SQL Statements</li>
  
<li>All other log statements</li>
</ul>
<p>Both default to the INFO log level. They will be written to System.out and a log file under &lt;tempDir&gt;/obevo.</p>
<p>Obevo uses the <a class="externalLink" href="https://www.slf4j.org">SLF4J API</a>, but the underlying implementation is <a class="externalLink" href="https://logback.qos.ch">Logback</a>. The default configuration file is in $OBEVO_HOME/conf.</p>
<p>The following system properties can modify this behavior (the previous section describes how to pass in system properties to Obevo).</p>

<ul>
  
<li>obevo.log.level: The log level (trace/debug/info/warn/error) to use for all log statements (console and file) except for SQL logs</li>
</ul>

<div class="source">
<div class="source"><pre class="prettyprint">Example:
-Dobevo.log.level=debug
</pre></div></div>

<ul>
  
<li>obevo.sqllog.level: The log level (trace/debug/info/warn/error) to use for the SQL log statements (console and file)</li>
  
<li>logback.configurationFile: The path to specify to another Logback configuration file, in case you want to fully customize the logging.</li>
  
<li>See the <a class="externalLink" href="https://logback.qos.ch/manual/configuration.html">Logback configuration page</a> for more details</li>
</ul></div></div>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2017&#x2013;2019
<a href="http://www.goldmansachs.com/">Goldman Sachs</a>.
All rights reserved.</p>
        </div>
        </div>
    </footer>
    </body>
</html>
